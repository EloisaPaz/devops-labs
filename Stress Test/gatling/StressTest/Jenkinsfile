node {
   stage('preparation') {
       checkout([
           $class: 'GitSCM',
           branches: [[name: '*/Tema16']],
           doGenerateSubmoduleConfigurations: false,
           extensions: [[$class: 'CleanBeforeCheckout']],
           userRemoteConfigs: [[credentialsId: 'git-credentials', url: 'https://github.com/EloisaPaz/jts.devops.2019.1.git']]
       ])
   }
   stage('Test') {
       fileExist = fileExists 'eloisa-paz/Tema16/Gatling/src/test/scala/calculator/CalculatorSimulation.scala'
        if (fileExist) {
            dir('eloisa-paz/Tema16/Gatling') {
                sh 'sbt gatling:test'
            }
        } else {
            error 'Gatling test not found'
        }
   }
}
